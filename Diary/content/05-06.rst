
Making the outer controller
===========================

:date: 2016-05-06

Yesterday I was able to make the inner controller. Today I need to make the outer controller. It would also be really nice to figure out why the simulink model is broken.

Turns out that if you dump the numerator and denominator of a discrete time transfer function into a continuous time transfer function block things get weird. Who would have guesed ? </sarcasm>

The next issue is that the reference models are performing poorly in simulink:

.. figure:: {filename}static/05-06/sml_ref_vs_real.png
    :alt: Reference model output versus real outputs.

Why the difference ? On the MATLAB side things sync up quite nicely. What have I fucked up this time ?

Turns out that this was quite easy to figure out. I was passing the error signal into the reference models instead of the virtual references.

Looking at the outer controller again we can observe yesterday's problem: the outer controller is still far too slow.




