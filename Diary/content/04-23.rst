
Making Progress
===============

:date: 2016-04-23

Yesterday was a lost day. I achieved practically nothing. I stared at bode plots all day without making any progress. 

Today was different. I decided I might as well re-study the mechanics of bode plots and the calculations behind them. Doing some theory must have helped to clear my mind because I actually was able to locate some errors in my script. 

- I had swapped the inner and outer controllers. This is probably what caused the significant lag to appear in the simulated output.
- what I was doing made no sense. I was running the set point for :math:`\Theta` through the inner reference model that controls the angular rate :math:`q` and passing it's output through an integrator instead of simulating the control loop. What I had made so little sense I'm ashamed to have ever written it. 
  
Things are looking up now ! The simulated :math:`\Theta` looks a bit slow but the controller actually works now which is great progress. The very next steps now are to generate the angular rate set-points and simulated outputs as well as the control variable for the quad-copter, the moments. 

I expect to do this rather easily tomorrow. Figuring out why the controller is tad-slow will be another issue though and I have no idea how long I'll take to figure that out.

.. figure:: {filename}static/04-23/simulated_model_behaviour.png
    :alt: Output of the pitch angle control system

    Output of the pitch angle control system

    The pitch angle control system looks a lot better now. The commutations happen in logical places however the system is still too slow. Its rise time should 3-4 seconds. Here the output never reaches the set-point. The settling time of my controller looks to be about 20s for a simple step.

